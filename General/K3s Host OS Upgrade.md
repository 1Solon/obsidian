![[Pasted image 20241210170520.png]]
> & reefland us @ Todey t 16:10 I've changed OS versions on x86 (not arm). If....you want to preserve the state of the cluster nodes and not just rebuild from scratch. | think if you backup and restore the /var/Lib/rancher directory upon reinstalling k3s, should be where you left off. You can use CLI tools to remove images / layers to reduce the size of the directory structure backup. (I have a repo called cri-purge for a script that removes old images, just keeps the latest semver the node is aware of). You might have an issue with etcd on node kubel which probably has the cluster init flag, which might cause kube2/kube3 from being able to connect when reinstalled. If that happens you might have to use the ——cluster-reset switch and pointit to a etcd snapshot it can restore (- Cluster-reset-restore-path=<name of snapshot to restore>). Hopefully you already have etcd snapshots being made and stored on minio or something. You can use sudo k3s etcd-snapshot list to make sure you have them and they are current. The path would be the name of the latest kube etcd snapshot. Or just rebuild cluster from scratch and not worry about any of this. 1 e

